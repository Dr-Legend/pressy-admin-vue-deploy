(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c0635"],{4223:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-col",{attrs:{span:2}},[a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.handleCreate()}}},[t._v("Add")])],1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list}},[a("el-table-column",{attrs:{type:"index",width:"50",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"180",align:"center",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"Type",width:"180",align:"center",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"startDate",label:"Date",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("parseTime")(e.row.startDate,"{y}-{m}-{d} {h}:{i}")))])]}}])}),t._v(" "),a("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return t.handleUpdate(e.row)}}},[t._v("Edit")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return t.handleDelete(e.row)}}},[t._v("Delete")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{"margin-left":"50px"},attrs:{rules:t.rules,model:t.temp,"label-position":"top","label-width":"70px"}},["update"==t.dialogStatus?a("el-form-item",{staticStyle:{width:"200px"},attrs:{label:"Id",prop:"id"}},[a("el-input",{model:{value:t.temp.id,callback:function(e){t.$set(t.temp,"id",e)},expression:"temp.id"}})],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"Type",prop:"type"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"Please select"},model:{value:t.temp.type,callback:function(e){t.$set(t.temp,"type",e)},expression:"temp.type"}},t._l(t.slotTypeOptions,(function(t){return a("el-option",{key:t.key,attrs:{label:t.display_name,value:t.key}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"Date",prop:"startDate"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"Please pick a date"},model:{value:t.temp.startDate,callback:function(e){t.$set(t.temp,"startDate",e)},expression:"temp.startDate "}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"200px"},attrs:{label:"Available Drivers",prop:"availableDrivers"}},[a("el-input-number",{attrs:{min:1,max:10},model:{value:t.temp.availableDrivers,callback:function(e){t.$set(t.temp,"availableDrivers",e)},expression:"temp.availableDrivers"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("\n        Cancel\n      ")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"===t.dialogStatus?t.createData():t.updateData()}}},[t._v("\n        Confirm\n      ")])],1)],1)],1)},l=[],r=(a("ac4d"),a("8a81"),a("ac6a"),a("b775"));function s(t){return Object(r["a"])({url:"/slot",method:"get",params:t})}function n(t){return Object(r["a"])({url:"/slot",method:"post",data:t})}function o(t){return Object(r["a"])({url:"/slot",method:"post",data:t})}var c=a("ed08"),d={filters:{parseTime:c["b"]},data:function(){return{listLoading:Boolean,list:null,dialogFormVisible:!1,dialogStatus:"",textMap:{update:"Edit",create:"Create"},slotTypeOptions:[{key:1,display_name:"Standard"},{key:2,display_name:"Vip"}],rules:{id:[{type:"number",required:!0,message:"Id is required",trigger:"blur"}],startDate:[{type:"date",required:!0,message:"date is required",trigger:"change"}],type:[{required:!0,message:"type is required",trigger:"change"}],availableDrivers:[{type:"number",required:!0,message:"no of Drivers are required",trigger:"blur"}]},temp:{id:0,type:1,startDate:new Date,availableDrivers:0}}},created:function(){this.getSlots()},methods:{getSlots:function(){var t=this;this.listLoading=!0,s().then((function(e){t.list=e,t.listLoading=!1}))},handleEdit:function(t,e){console.log(t,e)},handleDelete:function(t,e){console.log(t,e)},resetTemp:function(){this.temp={id:0,type:1,startDate:new Date,availableDrivers:0}},handleCreate:function(){var t=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick((function(){t.$refs["dataForm"].clearValidate()}))},createData:function(){var t=this;this.$refs["dataForm"].validate((function(e){e&&o(t.temp).then((function(){t.list.unshift(t.temp),t.dialogFormVisible=!1,t.$notify({title:"Success",message:"Created Successfully",type:"success",duration:2e3})}))}))},handleUpdate:function(t){var e=this;this.temp=Object.assign({},t),this.temp.startDate=new Date(this.temp.startDate),this.temp.type="standard"===this.temp.type?1:2,this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick((function(){e.$refs["dataForm"].clearValidate()}))},updateData:function(){var t=this;this.$refs["dataForm"].validate((function(e){if(e){var a=Object.assign({},t.temp);console.log(a.startDate),a.startDate=t.temp.startDate.toISOString(),n(a).then((function(){var e=!0,a=!1,i=void 0;try{for(var l,r=t.list[Symbol.iterator]();!(e=(l=r.next()).done);e=!0){var s=l.value;if(s.id===t.temp.id){t.temp.startDate=Object(c["b"])(t.temp.startDate),t.temp.type=1===t.temp.type?"standard":"Vip";var n=t.list.indexOf(s);t.list.splice(n,1,t.temp);break}}}catch(o){a=!0,i=o}finally{try{e||null==r.return||r.return()}finally{if(a)throw i}}t.dialogFormVisible=!1,t.$notify({title:"Success",message:"Updated Successfully",type:"success",duration:2e3})}))}}))}}},p=d,u=a("2877"),m=Object(u["a"])(p,i,l,!1,null,"426238d8",null);e["default"]=m.exports}}]);